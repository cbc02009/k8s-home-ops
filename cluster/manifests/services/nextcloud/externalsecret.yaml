---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: &name nextcloud
  namespace: services
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: *name
    creationPolicy: Owner
    # template:
    #   engineVersion: v2
    #   data:
    #     # Prowlarr
    #     RADARR__API_KEY: "{{ .RADARR__API_KEY }}"
    #     RADARR__POSTGRES_USER: "{{ .RADARR__POSTGRES_USER }}"
    #     RADARR__POSTGRES_PASSWORD: "{{ .RADARR__POSTGRES_PASSWORD }}"
    #     # Postgres Init
    #     POSTGRES_SUPER_PASS: "{{ .POSTGRES_SUPER_PASS }}"
    #     POSTGRES_PASS: "{{ .NC_POSTGRESS_PASS }}"
    #     POSTGRES_USER: "{{ .NC_POSTGRES_USER }}"
  dataFrom:
    - extract:
        key: nextcloud
    - extract:
        key: postgres
